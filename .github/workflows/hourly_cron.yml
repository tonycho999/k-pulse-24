name: 2-Hour K-POP Automation Cycle

on:
  schedule:
    # 매시간 1분부터 56분까지 5분 간격으로 실행
    - cron: '1,6,11,16,21,26,31,36,41,46,51,56 * * * *'
    # 정각(배포용) 실행
    - cron: '0 * * * *'
  workflow_dispatch:

jobs:
  ping_api:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger API
        run: |
          curl -X GET "https://k-pulse-24.vercel.app/api/collect" \
          -H "Authorization: Bearer ${{ secrets.CRON_SECRET }}"
